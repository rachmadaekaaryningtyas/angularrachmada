(self.webpackChunkmy_angular=self.webpackChunkmy_angular||[]).push([[166],{2051:function(t,e){var a,n;void 0===(n="function"==typeof(a=function(){"use strict";function e(t,e,a){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){l(n.response,e,a)},n.onerror=function(){console.error("could not download file")},n.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function n(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(a)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(t,o,l){var d=i.URL||i.webkitURL,s=document.createElement("a");s.download=o=o||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?n(s):a(s.href)?e(t,o,l):n(s,s.target="_blank")):(s.href=d.createObjectURL(t),setTimeout(function(){d.revokeObjectURL(s.href)},4e4),setTimeout(function(){n(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,i,o){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),i);else if(a(t))e(t,i,o);else{var l=document.createElement("a");l.href=t,l.target="_blank",setTimeout(function(){n(l)})}}:function(t,a,n,l){if((l=l||open("","_blank"))&&(l.document.title=l.document.body.innerText="downloading..."),"string"==typeof t)return e(t,a,n);var d="application/octet-stream"===t.type,s=/constructor/i.test(i.HTMLElement)||i.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||d&&s||o)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=r?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=t:location=t,l=null},c.readAsDataURL(t)}else{var u=i.URL||i.webkitURL,g=u.createObjectURL(t);l?l.location=g:location.href=g,l=null,setTimeout(function(){u.revokeObjectURL(g)},4e4)}});i.saveAs=l.saveAs=l,t.exports=l})?a.apply(e,[]):a)||(t.exports=n)},166:(t,e,a)=>{"use strict";a.r(e),a.d(e,{AdminModule:()=>F});var n=a(1116),i=a(5366),o=a(3957),l=a(3337),d=a(7112),s=a(4369),r=a(7307),c=a(168),u=a(667),g=a(7064);let p=(()=>{class t{constructor(t,e){this.api=t,this.router=e,this.mode="side"}ngOnInit(){this.checklogin()}checklogin(){this.api.get("bookswithauth/status").subscribe(t=>{},t=>{this.router.navigate(["/login"])})}logout(){confirm("Keluar aplikasi?")&&(localStorage.removeItem("appToken"),window.location.reload())}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(o.s),i.Y36(l.F0))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-admin"]],decls:30,vars:8,consts:[["color","accent",1,"example-header"],["mat-icon-button","",3,"click"],[1,"spacer"],["mat-button","",3,"click"],[1,"admin-container"],["mode","side","opened","",1,"sidenav-left",3,"position","fixedInViewport","fixedTopGap","fixedBottomGap"],["sidenav",""],["routerLink","/admin/dashboard"],["matListIcon",""],["matLine",""],["routerLink","/admin/product"],["mode","side",1,"example-sidenav",3,"position","fixedInViewport","fixedTopGap","fixedBottomGap"],[2,"padding","20px","background-color","#ccc"]],template:function(t,e){if(1&t){const t=i.EpF();i.ynx(0),i.TgZ(1,"mat-toolbar",0),i.TgZ(2,"button",1),i.NdJ("click",function(){return i.CHM(t),i.MAs(14).toggle()}),i.TgZ(3,"mat-icon"),i._uU(4,"menu"),i.qZA(),i.qZA(),i.TgZ(5,"span"),i._uU(6,"My Angular"),i.qZA(),i._UZ(7,"span",2),i.TgZ(8,"small"),i._uU(9,"admin"),i.qZA(),i.TgZ(10,"button",3),i.NdJ("click",function(){return e.logout()}),i._uU(11,"Logout"),i.qZA(),i.qZA(),i.TgZ(12,"mat-sidenav-container",4),i.TgZ(13,"mat-sidenav",5,6),i.TgZ(15,"mat-nav-list"),i.TgZ(16,"mat-list-item",7),i.TgZ(17,"mat-icon",8),i._uU(18,"dashboard"),i.qZA(),i.TgZ(19,"h3",9),i._uU(20,"Dashboard"),i.qZA(),i.qZA(),i.TgZ(21,"mat-list-item",10),i.TgZ(22,"mat-icon",8),i._uU(23,"camera_enhance"),i.qZA(),i.TgZ(24,"h3",9),i._uU(25,"Products"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i._UZ(26,"mat-sidenav",11,6),i.TgZ(28,"mat-sidenav-content",12),i._UZ(29,"router-outlet"),i.qZA(),i.qZA(),i.BQk()}2&t&&(i.xp6(13),i.Q6J("position","start")("fixedInViewport",!0)("fixedTopGap",60)("fixedBottomGap",0),i.xp6(13),i.Q6J("position","end")("fixedInViewport",!0)("fixedTopGap",60)("fixedBottomGap",0))},directives:[d.Ye,s.lW,r.Hw,c.TM,c.JX,u.Hk,u.Tg,l.rH,u.Nh,g.X2,c.Rh,l.lC],styles:[".admin-container[_ngcontent-%COMP%]{position:absolute;top:60px;bottom:0;left:0;right:0}.admin-sidenav[_ngcontent-%COMP%]{width:350px}.admin-sidenav[_ngcontent-%COMP%], .sidenav-left[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sidenav-left[_ngcontent-%COMP%]{width:250px}"]}),t})();var h=a(3978);let Z=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(t,e){1&t&&(i.TgZ(0,"p"),i._uU(1,"dashboard works!"),i.qZA())},styles:[""]}),t})();var f=a(1073),m=a(2935);let b=(()=>{class t{constructor(t,e,a){this.api=t,this.dialogRef=e,this.data=a,this.fileNam=""}ngOnInit(){}onFileChange(t){t.target.files.length>0&&(this.selectedFile=t.target.files[0],"image/png"!=this.selectedFile.type&&alert("File harus PNG"),console.log(this.selectedFile))}uploadFile(){let t=new FormData;t.append("file",this.selectedFile),this.loadingUpload=!0,this.api.upload(t).subscribe(t=>{this.updateProduct(t),console.log(t)},t=>{this.loadingUpload=!1,alert("Gagal mengunggah file")})}updateProduct(t){1==t.status?(this.loadingUpload=!1,alert("File berhasil diunggah")):alert(t.massage)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(o.s),i.Y36(m.so),i.Y36(m.WI))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-file-uploader"]],decls:13,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"uk-flex","uk-flex-middle","uk-flex-center",2,"height","100px","outline","2px dashed #ccc","margin","10px",3,"click"],["type","file","id","file",2,"display","none",3,"change"],["fileInput",""],["mat-dialog-action","","align","right"],["mat-button","","mat-dialog-close","",2,"margin-right","5px"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"h1",0),i._uU(1,"Unggah File"),i.qZA(),i.TgZ(2,"div",1),i.TgZ(3,"div",2),i.NdJ("click",function(){return i.CHM(t),i.MAs(7).click()}),i.TgZ(4,"span"),i._uU(5),i.qZA(),i.qZA(),i.TgZ(6,"input",3,4),i.NdJ("change",function(t){return e.onFileChange(t)}),i.qZA(),i.qZA(),i.TgZ(8,"div",5),i.TgZ(9,"button",6),i._uU(10,"Batal"),i.qZA(),i.TgZ(11,"button",7),i.NdJ("click",function(){return e.uploadFile()}),i._uU(12),i.qZA(),i.qZA()}2&t&&(i.xp6(5),i.Oqu(e.selectedFile?e.selectedFile.name:"Pilih File"),i.xp6(6),i.Q6J("disabled",e.loadingUpload),i.xp6(1),i.Oqu(e.loadingUpload?"UpLoading....":"UpLoad"))},directives:[m.uh,m.xY,s.lW,m.ZT],styles:[""]}),t})();var T=a(3070),A=a(9550),q=a(1041);let x=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.data=e,this.api=a}ngOnInit(){}saveData(){this.loading=!0,null==this.data.id?this.api.post("/bookswithauth",this.data).subscribe(t=>{this.dialogRef.close(t),this.loading=!1},t=>{this.loading=!1,alert("Tidak dapat menyimpan data, Coba Lagi")}):this.api.put("/bookswithauth///"+this.data.id,this.data).subscribe(t=>{this.dialogRef.close(t),this.loading=!1},t=>{this.loading=!1,alert("Tidak dapat memperbaharui data, Coba Lagi")})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(m.so),i.Y36(m.WI),i.Y36(o.s))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-product-detail"]],decls:32,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","outline",2,"width","100%"],["matInput","",3,"ngModel","ngModelChange"],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(i.TgZ(0,"h3",0),i._uU(1," Detail Produk\n"),i.qZA(),i.TgZ(2,"div",1),i.TgZ(3,"mat-form-field",2),i.TgZ(4,"mat-label"),i._uU(5,"Judul"),i.qZA(),i.TgZ(6,"input",3),i.NdJ("ngModelChange",function(t){return e.data.title=t}),i.qZA(),i.qZA(),i.TgZ(7,"mat-form-field",2),i.TgZ(8,"mat-label"),i._uU(9,"Penulis"),i.qZA(),i.TgZ(10,"input",3),i.NdJ("ngModelChange",function(t){return e.data.author=t}),i.qZA(),i.qZA(),i.TgZ(11,"mat-form-field",2),i.TgZ(12,"mat-label"),i._uU(13,"Penerbit"),i.qZA(),i.TgZ(14,"input",3),i.NdJ("ngModelChange",function(t){return e.data.publisher=t}),i.qZA(),i.qZA(),i.TgZ(15,"mat-form-field",2),i.TgZ(16,"mat-label"),i._uU(17,"Tahun Terbit"),i.qZA(),i.TgZ(18,"input",3),i.NdJ("ngModelChange",function(t){return e.data.year=t}),i.qZA(),i.qZA(),i.TgZ(19,"mat-form-field",2),i.TgZ(20,"mat-label"),i._uU(21,"ISBN"),i.qZA(),i.TgZ(22,"input",3),i.NdJ("ngModelChange",function(t){return e.data.isbn=t}),i.qZA(),i.qZA(),i.TgZ(23,"mat-form-field",2),i.TgZ(24,"mat-label"),i._uU(25,"Harga"),i.qZA(),i.TgZ(26,"input",4),i.NdJ("ngModelChange",function(t){return e.data.price=t}),i.qZA(),i.qZA(),i.qZA(),i.TgZ(27,"div",5),i.TgZ(28,"button",6),i._uU(29,"Batal"),i.qZA(),i.TgZ(30,"button",7),i.NdJ("click",function(){return e.saveData()}),i._uU(31),i.qZA(),i.qZA()),2&t&&(i.xp6(6),i.Q6J("ngModel",e.data.title),i.xp6(4),i.Q6J("ngModel",e.data.author),i.xp6(4),i.Q6J("ngModel",e.data.publisher),i.xp6(4),i.Q6J("ngModel",e.data.year),i.xp6(4),i.Q6J("ngModel",e.data.isbn),i.xp6(4),i.Q6J("ngModel",e.data.price),i.xp6(4),i.Q6J("disabled",e.loading),i.xp6(1),i.Oqu(e.loading?"Menyimpan..":"Simpan"))},directives:[m.uh,m.xY,T.KE,T.hX,A.Nt,q.Fj,q.JJ,q.On,q.wV,m.H8,s.lW,m.ZT],styles:[""]}),t})();var k=a(2051),v=a(7672),w=a(2797);function U(t,e){1&t&&(i.TgZ(0,"div",2),i._UZ(1,"mat-spinner",3),i.qZA())}function _(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"button",13),i.NdJ("click",function(){i.CHM(t);const e=i.oxw().$implicit;return i.oxw(2).download(e)}),i.TgZ(1,"mat-icon"),i._uU(2,"file_download"),i.qZA(),i.qZA()}}function y(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"tr"),i.TgZ(1,"td"),i.YNc(2,_,3,0,"button",10),i.qZA(),i.TgZ(3,"td"),i._uU(4),i.qZA(),i.TgZ(5,"td"),i._uU(6),i.qZA(),i.TgZ(7,"td"),i._uU(8),i.qZA(),i.TgZ(9,"td"),i._uU(10),i.qZA(),i.TgZ(11,"td"),i._uU(12),i.qZA(),i.TgZ(13,"td"),i._uU(14),i.qZA(),i.TgZ(15,"td"),i._uU(16),i.qZA(),i.TgZ(17,"td"),i._uU(18),i.qZA(),i.TgZ(19,"td",8),i.TgZ(20,"button",11),i.NdJ("click",function(){i.CHM(t);const a=e.$implicit;return i.oxw(2).upload(a)}),i._uU(21,"upload"),i.qZA(),i.TgZ(22,"button",11),i.NdJ("click",function(){i.CHM(t);const a=e.$implicit,n=e.index;return i.oxw(2).productDetail(a,n)}),i._uU(23,"Edit"),i.qZA(),i.TgZ(24,"button",12),i.NdJ("click",function(){i.CHM(t);const a=e.$implicit,n=e.index;return i.oxw(2).deleteProduct(a.id,n)}),i._uU(25),i.qZA(),i.qZA(),i.qZA()}if(2&t){const t=e.$implicit,a=e.index,n=i.oxw(2);i.xp6(2),i.Q6J("ngIf",""!=t.url),i.xp6(2),i.Oqu(a+1),i.xp6(2),i.Oqu(t.title),i.xp6(2),i.Oqu(t.author),i.xp6(2),i.Oqu(t.publisher),i.xp6(2),i.Oqu(t.year),i.xp6(2),i.Oqu(t.isbn),i.xp6(2),i.Oqu(t.year),i.xp6(2),i.Oqu(t.price),i.xp6(6),i.Q6J("disabled",n.loadingDelete[a]),i.xp6(1),i.Oqu(n.loadingDelete[a]?"Menghapus..":"Delete")}}function M(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"mat-card"),i.TgZ(1,"mat-card-header"),i.TgZ(2,"mat-card-title"),i._uU(3),i.qZA(),i.qZA(),i.TgZ(4,"mat-card-content"),i.TgZ(5,"div",4),i._UZ(6,"span",5),i.TgZ(7,"button",6),i.NdJ("click",function(){return i.CHM(t),i.oxw().productDetail({},-1)}),i._uU(8,"Tambah Produk"),i.qZA(),i.qZA(),i.TgZ(9,"table",7),i.TgZ(10,"thead"),i._UZ(11,"th"),i.TgZ(12,"th"),i._uU(13,"No"),i.qZA(),i.TgZ(14,"th"),i._uU(15,"Judul"),i.qZA(),i.TgZ(16,"th"),i._uU(17,"Penulis"),i.qZA(),i.TgZ(18,"th"),i._uU(19,"Penerbit"),i.qZA(),i.TgZ(20,"th"),i._uU(21,"ISBN"),i.qZA(),i.TgZ(22,"th"),i._uU(23,"Tahun Terbit"),i.qZA(),i.TgZ(24,"th"),i._uU(25,"Harga"),i.qZA(),i.TgZ(26,"th",8),i._uU(27,"#"),i.qZA(),i.qZA(),i.TgZ(28,"tbody"),i.YNc(29,y,26,11,"tr",9),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&t){const t=i.oxw();i.xp6(3),i.Oqu(t.title),i.xp6(26),i.Q6J("ngForOf",t.books)}}let J=(()=>{class t{constructor(t,e){this.dialog=t,this.api=e,this.book={},this.books=[],this.loadingDelete={},this.title="Produk",this.getBooks()}ngOnInit(){}getBooks(){this.loading=!0,this.api.get("bookswithauth").subscribe(t=>{this.books=t,this.loading=!1},t=>{this.loading=!1,alert("Ada masalah saat pengambilan data. Coba lagi!")})}productDetail(t,e){this.dialog.open(x,{width:"400px",data:t}).afterClosed().subscribe(a=>{a&&(-1==e?this.books.push(a):this.books[e]=t)})}deleteProduct(t,e){confirm("Delete item?")&&(this.loadingDelete[e]=!0,this.api.delete("/bookswithauth///"+this.books[e].id).subscribe(t=>{this.books.splice(e,1),this.loadingDelete[e]=!1},t=>{alert("Tidak dapat menghapus data, coba lagi"),this.loadingDelete[e]=!1}))}upload(t){this.dialog.open(b,{height:"300px",width:"400px",data:t}).afterClosed().subscribe(t=>{})}download(t){k.saveAs("http://api.sunhouse.co.id/bookstore/"+t.url)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(m.uw),i.Y36(o.s))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-product"]],decls:2,vars:2,consts:[["style","height: 300px;","class","uk-flex uk-flex-center uk-flex-middle",4,"ngIf"],[4,"ngIf"],[1,"uk-flex","uk-flex-center","uk-flex-middle",2,"height","300px"],["diameter","30"],[1,"uk-flex"],[1,"uk-width-expand"],["mat-flat-button","","color","primary",3,"click"],[1,"uk-table","uk-table-middle","uk-table-divider"],["align","right"],[4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"disabled","click"],["mat-icon-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(i.YNc(0,U,2,0,"div",0),i.YNc(1,M,30,2,"mat-card",1)),2&t&&(i.Q6J("ngIf",e.loading),i.xp6(1),i.Q6J("ngIf",!e.loading))},directives:[n.O5,v.$g,w.a8,w.dk,w.n5,w.dn,s.lW,n.sg,r.Hw],styles:[""]}),t})();var O=a(2693);const C=[{path:"",component:p,children:[{path:"dashboard",component:Z},{path:"product",component:J},{path:"",redirectTo:"/admin/dashboard",pathMatch:"full"}]}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[n.ez,l.Bz.forChild(C),h.M,f.QG,q.u5,O.JF]]}),t})()}}]);